# -*- org-export-babel-evaluate: nil -*-
#+PROPERTY: header-args :exports none :cache yes :session :exports results :results graphics

#+begin_src R :results none :exports none
  library(data.table)
  library(ggplot2)
  require(gridExtra)
  fc <- fread('_data/fiber_counts.csv', colClasses=c('factor','factor','numeric'))
  fl <- fread('_data/fiber_lengths_sample.csv', colClasses=c('factor','factor','numeric'))
#+end_src

#+begin_src R :file report/fiber_counts.png :height 1500 :width 750
  g1 <- ggplot(d, aes(x=count, fill=ukftype)) + geom_density(alpha=0.3) + ggtitle('Whole Brain Fiber Count: Matlab vs C++')
  g2 <- ggplot(d[ukftype=="mat"], aes(x=count, fill=siteid)) + geom_density(alpha=0.3) + ggtitle('Whole Brain Fiber Count by Site: Matlab')
  grid.arrange(g1, g2, ncol=1, nrow=2) #
#+end_src

#+RESULTS[7545f88b39f251ed666711ad7251002cc8507b21]:
[[file:report/fiber_counts.png]]

#+begin_src R :session :file report/fiber_lengths.png :results graphics :width 550 :exports results :cache yes :width 750 :height 1500
g1b <- ggplot(fl[ukftype=="vtk"], aes(x=length, fill=siteid)) + geom_density(alpha=0.3) + xlim(c(1,200)) + ggtitle("Fiber Lengths by Site: C++")
g2b <- ggplot(fl[ukftype=="mat"], aes(x=length, fill=siteid)) + geom_density(alpha=0.3) + xlim(c(1,200)) + ggtitle("Fiber Lengths by Site: Matlab")
grid.arrange(g1b, g2b, ncol=1) #
#+end_src

#+RESULTS[af71e97c8f4e80dba2af633669601cde3f127d20]:
[[file:report/fiber_lengths.png]]
